; Custom php.ini for Drupal development
; Loaded via Dockerfile copy to /usr/local/etc/php/conf.d/zz-custom.ini

display_errors=On
display_startup_errors=On
error_reporting=E_ALL
log_errors=On

memory_limit=512M
max_execution_time=120
max_input_vars=5000

upload_max_filesize=64M
post_max_size=64M

date.timezone=UTC

; Realpath cache improves performance for large codebases
realpath_cache_size=4096K
realpath_cache_ttl=600

; OPCache recommended settings for Drupal
opcache.enable=1
opcache.enable_cli=1
opcache.memory_consumption=192
opcache.interned_strings_buffer=16
opcache.max_accelerated_files=50000
opcache.validate_timestamps=1
opcache.revalidate_freq=2
opcache.save_comments=1
opcache.fast_shutdown=1

; APCu (if enabled) tuning
apc.enabled=1
apc.shm_size=64M
apc.enable_cli=1

; Session settings
session.cookie_httponly=1
session.use_strict_mode=1

; Disable xdebug by default (enable manually if installed)
; xdebug.mode=off

; Increase default backtrack limit for complex regex in Drupal
pcre.backtrack_limit=500000
pcre.recursion_limit=500000
