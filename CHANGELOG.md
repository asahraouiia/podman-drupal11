# CHANGELOG

Keep a short, chronological list of noteworthy changes to this project.

Format suggestion:

- YYYY-MM-DD — Author — Short one-line summary. Files/paths: `path1`, `path2`. Notes: ...

## Historique

- **2025-11-29** — asahraoui — ps_dico_types: liens de menu + corrections de routes + doc. Fichiers : `ps_dico_types.links.menu.yml`, `ps_dico_types.links.action.yml`, `ps_dico_types.routing.yml`, `src/*`, `docs/drupal/*`. Notes : Ajout des entrées de menu (Structure → Dictionary Types/Items) et boutons d'action. Séparation des routes: collection globale `/admin/structure/ps-dico-items` et collection par type `/admin/structure/ps-dico-types/{ps_dico_type}/dicos`. Correction du ListBuilder pour générer l'URL avec le paramètre requis. Documentation mise à jour (Accès rapide, Dépannage). Création d'un type d'exemple `transaction_type` et d'un champ de test `field_transaction_test` (Article).

- **2025-11-29** — asahraoui — Développement complet du module ps_dico_types (PropertySearch dictionary management system). Fichiers : `src/web/modules/custom/ps_dico_types/` (20 fichiers), `docs/drupal/ps-dico-types-global.md`, `docs/drupal/ps-dico-types-technical.md`. Notes : Module Drupal 11 fournissant un système de dictionnaires inspiré de taxonomy (vocabulaire/termes) mais avec config entities pour export/import CMI. Entités : PsDicoType (vocabulaire-like) et PsDico (terme-like avec type, weight). Type de champ `ps_dictionary` avec widget configurable (sélection ps_dico_type, filtrage automatique des items) et formatter (label avec lien optionnel). SettingsManager service pour accès centralisé à la config (pas de \Drupal::config()). Stratégie cache stricte : tags ps_dico_type:{id}/ps_dico:{id}, contexts languages, max-age 900s (configurable). Routes admin sous `/admin/structure/ps-dico-types`. Documentation complète (global + technical) dans `docs/drupal/`. Permission unifiée `administer ps_dico_types`. Module production-ready, suit guidelines PropertySearch architecture.

- **2025-11-28** — asahraoui — Correction erreur bind mounts logs sous Windows/WSL + ajout module custom Drupal. Fichiers : `podman-compose.yml`, `src/web/modules/custom/my_list_field/`, `docs/PODMAN_DRUPAL11_SETUP.md`, `.gitignore`. Notes : Suppression volumes `./logs/apache`, `./logs/php`, `./logs/postgres` causant erreurs `/mnt/c/` sous WSL. Alternative : `podman logs <container>`. Ajout module example `my_list_field` (FieldType extends ListItemBase avec contrôle save via preSave() + EventSubscriber). Règles .gitignore ajustées pour tracker custom modules/themes sous `src/web/` et `web/`.


- **2025-11-27** — asahraoui — Ajout du support WebP et AVIF dans l'extension GD pour l'optimisation des images. Fichiers : `docker/php/Dockerfile`, `docs/03_CONTAINER_PHP_INSTALL.md`. Notes : WebP (~30% plus léger que JPEG), AVIF (~50% plus léger), formats modernes pour améliorer les performances web de Drupal.

- 2025-11-27 — abdel — Ajout script de vérification des extensions PHP. Files: `scripts/check-php-extensions.sh`, `Makefile`, `docs/03_CONTAINER_PHP_INSTALL.md`, `README.md`. Notes: Nouveau script `check-php-extensions.sh` pour vérifier automatiquement toutes les extensions PHP requises par Drupal 11 (pdo, pdo_pgsql, pgsql, gd, xml, zip, intl, opcache, bcmath, apcu). Affiche les détails de l'extension GD (bundled 2.1.0 compatible) avec support FreeType, JPEG, PNG, GIF. Commande `make php/check-extensions` ajoutée. Documentation enrichie avec exemples de vérification GD. ✅ Confirmation : GD library est bien installée et fonctionnelle.

- 2025-11-27 — abdel — Exposition PostgreSQL port 5432 + ajout commandes Drush dans Makefile. Files: `podman-compose.yml`, `scripts/SETUP_FULL.sh`, `docs/04_CONTAINER_POSTGRESQL_INSTALL.md`, `Makefile`. Notes: Exposition du port PostgreSQL 5432 sur localhost pour permettre la connexion depuis VSCode, DBeaver, pgAdmin et autres outils externes via `localhost:5432`. Ajout de variables `DRUSH_CMD` et `COMPOSER_CMD` dans Makefile pour simplifier les commandes. Nouvelles cibles: `make drush/status`, `make drush/cr`, `make drush/cex`, `make drush/cim`, `make drush/uli`. Section aide enrichie avec exemples Drush et Composer. Documentation mise à jour avec configuration pour outils externes.

- 2025-11-27 — abdel — Optimisation WSL2/Podman + correction chemins Git Bash dans SETUP_FULL.sh. Files: `scripts/SETUP_FULL.sh`, `config/.wslconfig`, `scripts/configure-wsl-podman.sh`, `scripts/configure-wsl-podman.ps1`. Notes: Correction du chemin `.wslconfig` de `/mnt/c/Users/$USER/` vers `/c/Users/abdel/` pour compatibilité Git Bash. Ajout configuration WSL2 (6GB RAM, 4 CPUs, 2GB swap) dans `config/.wslconfig`. Scripts Bash et PowerShell pour copier `.wslconfig`, redémarrer WSL et Podman Machine. Note importante: sous WSL, `podman machine set` n'est pas supporté - les ressources sont héritées de WSL2. Timeout Composer augmenté à 2400s. Installation complète testée et validée avec succès.

- 2025-11-26 — abdel — Ajout script d'installation automatisée complète SETUP_FULL.sh. Files: `scripts/SETUP_FULL.sh`, `docs/07_SETUP_FULL_SCRIPT.md`, `docs/00_GUIDE_LECTURE.md`, `README.md`, `CHANGELOG.md`. Notes: Nouveau script `SETUP_FULL.sh` avec deux modes : (1) Réinitialisation complète (nettoyage + build images + démarrage containers + composer install + configuration Drupal), (2) Démarrage simple des containers existants. Timeout Composer optimisé à 1200s pour gérer l'extraction de drupal/core dans WSL2. Conservation automatique de composer.json/composer.lock lors du nettoyage. Documentation complète avec durées estimées, commandes utiles, dépannage. Tests validés : mode 2 fonctionne parfaitement, redémarre les containers en ~10s.

- 2025-11-26 — abdel — Renommage des fichiers de documentation avec préfixes numériques. Files: `docs/00_GUIDE_LECTURE.md`, `docs/01_PODMAN_INSTALL.md`, `docs/02_CONTAINER_APACHE_INSTALL.md`, `docs/03_CONTAINER_PHP_INSTALL.md`, `docs/04_CONTAINER_POSTGRESQL_INSTALL.md`, `docs/05_DRUPAL_INSTALLATION.md`, `docs/06_CLEANUP_SCRIPT.md`, `README.md`, `CHANGELOG.md`. Notes: Renommage de tous les fichiers de documentation avec préfixes 00 à 06 pour indiquer l'ordre logique de lecture. 00 = Guide de lecture, 01-05 = Parcours d'apprentissage (Podman → Apache → PHP → PostgreSQL → Drupal), 06 = Maintenance (cleanup). Mise à jour de tous les liens internes dans README.md et les fichiers de documentation. Facilite la navigation pour les nouveaux utilisateurs.

- 2025-11-26 — abdel — Ajout guide de lecture de la documentation. Files: `docs/GUIDE_LECTURE.md`, `README.md`, `CHANGELOG.md`. Notes: Nouveau guide complet pour naviguer dans la documentation selon le niveau de l'utilisateur. Trois parcours : débutant (2h, tous les guides), intermédiaire (30-45 min, survol), avancé (5-10 min, sections spécifiques). Inclut des scénarios d'utilisation (installation complète, dépannage, personnalisation), index des problèmes courants, glossaire, et conseils de lecture. Tableau de parcours d'apprentissage recommandé dans README.md avec temps estimés.

- 2025-11-26 — abdel — Ajout script de nettoyage complet cleanup.sh. Files: `scripts/cleanup.sh`, `docs/CLEANUP_SCRIPT.md`, `docs/PODMAN_INSTALL.md`, `CHANGELOG.md`, `README.md`. Notes: Nouveau script `cleanup.sh` pour supprimer automatiquement tous les conteneurs/images/volumes/réseaux Podman avec confirmation interactive. Documentation complète dans `CLEANUP_SCRIPT.md` avec exemples d'utilisation, étapes détaillées, alternatives manuelles et dépannage. Intégration dans PODMAN_INSTALL.md section 9.1 et README.md (section Scripts disponibles). Permet de repartir d'un environnement propre facilement.

- 2025-11-25 — abdel — Ajout procédure complète validée avec syntaxe volumes Windows. Files: `docs/PODMAN_INSTALL.md`, `CHANGELOG.md`. Notes: Nouvelle section 9 dans PODMAN_INSTALL.md documentant la procédure complète testée et validée étape par étape. Point clé: sous Git Bash Windows, utiliser la syntaxe `C:\\Users\\...\\src:/var/www/html` avec backslashes échappés pour les volumes (les formats `./src` et `$PWD/src` ne fonctionnent PAS). Workflow complet: nettoyage → réseau → build images → volume → démarrage conteneurs (db puis php puis web) → vérification. Tests OK - environnement fonctionnel, site accessible sur http://localhost:8080.

- 2025-11-25 — abdel — Réorganisation complète de la documentation en fichiers spécialisés. Files: `docs/PODMAN_INSTALL.md`, `docs/CONTAINER_APACHE_INSTALL.md`, `docs/CONTAINER_PHP_INSTALL.md`, `docs/CONTAINER_POSTGRESQL_INSTALL.md`, `docs/DRUPAL_INSTALLATION.md`, `README.md`, `CHANGELOG.md`. Notes: Séparation de la documentation en 5 fichiers spécialisés - (1) Installation Podman/WSL2 avec gestion volumes/réseaux, (2) Configuration conteneur Apache avec Dockerfile/vhost/modules, (3) Configuration conteneur PHP-FPM avec extensions/Composer/php.ini, (4) Configuration conteneur PostgreSQL avec variables/volumes/sauvegarde, (5) Installation et gestion Drupal. Anciens fichiers PODMAN_ENVIRONMENT.md et INSTALLATION.md sauvegardés en .backup.

- 2025-11-25 — abdel — Réorganisation de la documentation en 2 guides distincts. Files: `docs/PODMAN_ENVIRONMENT.md`, `docs/DRUPAL_INSTALLATION.md`, `README.md`, `CHANGELOG.md`. Notes: Séparation claire entre documentation Podman/environnement (installation WSL2, gestion conteneurs, volumes, réseaux, monitoring) et documentation Drupal (installation, configuration, modules, mises à jour, Drush). Ancien fichier INSTALLATION.md sauvegardé dans INSTALLATION.md.backup.

- 2025-11-25 — abdel — Documentation complète + scripts de monitoring/logs. Files: `docs/INSTALLATION.md`, `scripts/health-check.*`, `scripts/logs-collect.*`, `scripts/stop-containers.*`, `podman-compose.yml`, `Makefile`, `README.md`. Notes: Guide d'installation complet (9 sections) avec prérequis WSL2/Podman, structure projet, configuration complète, commandes, tests de vérification, dépannage, sécurité. Ajout healthchecks et volumes logs dans podman-compose.yml. Scripts Bash + PowerShell pour vérifier santé conteneurs et collecter logs.

- 2025-01-27 — abdel — Correction modules Apache critiques + upgrade PostgreSQL 16. Files: `docker/apache/Dockerfile`, `podman-compose.yml`, `docs/PODMAN_DRUPAL11_SETUP.md`. Notes: Les modules `proxy`, `proxy_fcgi` et `rewrite` sont OBLIGATOIRES pour que PHP fonctionne. PostgreSQL mis à jour vers version 16 (requis par Drupal 11). Configuration base de données ajoutée dans `settings.php`.

- 2025-01-27 — abdel — Ajout d'un script de gestion des modules Apache. Files: `scripts/manage-apache-modules.sh`, `scripts/manage-apache-modules.ps1`. Notes: Permet d'activer/désactiver facilement les modules Apache (headers, expires, deflate, ssl, etc.). Usage: `./scripts/manage-apache-modules.sh enable headers expires` ou `.\scripts\manage-apache-modules.ps1 enable headers`.

- 2025-01-27 — abdel — Activation des clean URLs Drupal (mod_rewrite Apache) + scripts d'initialisation Podman/WSL. Files: `docker/apache/Dockerfile`, `scripts/init-podman.sh`, `scripts/init-podman.ps1`, `scripts/start-containers.sh`, `scripts/start-containers.ps1`. Notes: Utiliser `podman compose` au lieu de `podman-compose`. Commande de démarrage: `./scripts/start-containers.sh` ou `.\scripts\start-containers.ps1`.

- 2025-01-27 — abdel — Add Podman development stack, PHP & Apache Dockerfiles, helper scripts. Files: `docker/php/Dockerfile`, `docker/apache/Dockerfile`, `podman-compose.yml`, `scripts/*`.
